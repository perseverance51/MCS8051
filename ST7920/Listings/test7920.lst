C51 COMPILER V9.60.0.0   TEST7920                                                          12/22/2021 10:31:52 PAGE 1   


C51 COMPILER V9.60.0.0, COMPILATION OF MODULE TEST7920
OBJECT MODULE PLACED IN .\Objects\test7920.obj
COMPILER INVOKED BY: C:\Keil_v5\C51\BIN\C51.EXE SRC\test7920.c OPTIMIZE(8,SPEED) BROWSE DEBUG OBJECTEXTEND PRINT(.\Listi
                    -ngs\test7920.lst) TABS(2) OBJECT(.\Objects\test7920.obj)

line level    source

   1          //ST7920的测试主程序，注意此文件要保存为GBK格式，否则汉字无法正常显示
   2          #include <STC89C5xRC.H>
   3          
   4          #include <string.h>
   5          //#include <avr/pgmspace.h>
   6          #include "st7920.h"
*** ERROR C141 IN LINE 67 OF SRC\st7920.h: syntax error near ')', expected '<id>'
*** ERROR C141 IN LINE 70 OF SRC\st7920.h: syntax error near ')', expected '<id>'
*** ERROR C141 IN LINE 71 OF SRC\st7920.h: syntax error near ')', expected '<id>'
*** ERROR C141 IN LINE 81 OF SRC\st7920.h: syntax error near ')', expected '<id>'
   7          
   8          //liberty.bmp
   9          //48x64
  10          const unsigned char code bmpData[]  = {
  11          0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0xC0,0x00,0x00,0x00,0x00,0x01,0xE0,0x00,
  12          0x00,0x00,0x00,0x01,0x20,0x00,0x00,0x00,0x00,0x03,0xE0,0x00,0x00,0x00,0x00,0x03,
  13          0xF0,0x00,0x00,0x00,0x00,0x01,0xE0,0x00,0x00,0x00,0x00,0x01,0xC0,0x00,0x00,0x00,
  14          0x00,0x01,0xE0,0x00,0x00,0x00,0x00,0x01,0xE1,0x80,0x00,0x00,0x00,0x01,0xF1,0x84,
  15          0x00,0x00,0x00,0x01,0xF9,0x9C,0x00,0x00,0x00,0x00,0xFF,0xB8,0x00,0x00,0x00,0x00,
  16          0xBF,0xFF,0x00,0x00,0x00,0x00,0xFF,0xFF,0x00,0x00,0x00,0x00,0xDF,0xFC,0x00,0x00,
  17          0x00,0x00,0xDF,0xFF,0x80,0x00,0x00,0x00,0xDC,0x7F,0x00,0x00,0x00,0x00,0xDE,0xFC,
  18          0x00,0x00,0x00,0x00,0xDC,0xF0,0x00,0x00,0x00,0x01,0xFF,0x70,0x00,0x00,0x00,0x01,
  19          0xE7,0xD8,0x00,0x00,0x00,0x01,0xB3,0xD8,0x00,0x00,0x00,0x00,0xE1,0xF0,0x00,0x00,
  20          0x00,0x00,0xC1,0xF8,0x00,0x00,0x00,0x00,0x47,0xB8,0x00,0x00,0x00,0x00,0x4F,0xBC,
  21          0x00,0x00,0x00,0x00,0x4B,0x1D,0xC0,0x00,0x00,0x00,0x7A,0x7F,0xE0,0x00,0x00,0x00,
  22          0x36,0x6E,0x70,0x00,0x00,0x00,0x6C,0x6C,0xE0,0x00,0x00,0x00,0x6C,0x4C,0xE0,0x00,
  23          0x00,0x00,0xD8,0xCC,0xC0,0x00,0x00,0x00,0xD8,0xC5,0xC0,0x00,0x00,0x00,0x70,0xC7,
  24          0xC0,0x00,0x00,0x00,0x3C,0xC7,0x80,0x00,0x00,0x00,0x38,0xC7,0x80,0x00,0x00,0x00,
  25          0x78,0xC7,0x00,0x00,0x00,0x00,0x70,0xC6,0x00,0x00,0x00,0x00,0x70,0xC6,0x00,0x00,
  26          0x00,0x00,0x70,0xC6,0x00,0x00,0x00,0x00,0x30,0xC2,0x00,0x00,0x00,0x00,0x20,0xC2,
  27          0x00,0x00,0x00,0x00,0x60,0xC2,0x00,0x00,0x00,0x00,0x60,0xC6,0x00,0x00,0x00,0x00,
  28          0x60,0xFE,0x00,0x00,0x00,0x00,0x60,0xFE,0x00,0x00,0x00,0x00,0x60,0x7E,0x00,0x00,
  29          0x00,0x00,0x60,0x7E,0x00,0x00,0x00,0x00,0x60,0xFE,0x00,0x00,0x00,0x00,0x63,0xFE,
  30          0x00,0x00,0x00,0x00,0x67,0x7E,0x00,0x00,0x00,0x00,0x7F,0xFE,0x00,0x00,0x00,0x00,
  31          0x7F,0xFE,0x00,0x00,0x00,0x00,0x7F,0xDF,0x00,0x00,0x00,0x00,0x5F,0xDF,0x00,0x00,
  32          0x00,0x01,0xFF,0xFF,0x00,0x00,0x00,0x01,0x80,0x01,0x00,0x00,0x00,0x07,0xFF,0xFF,
  33          0xC0,0x00,0x00,0x06,0xFF,0xFE,0xE0,0x00,0x00,0x04,0x00,0x00,0x60,0x00,0x00,0x07,
  34          0xFF,0xFF,0xE0,0x00,0x00,0x07,0xFF,0xFF,0xC0,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
  35          };
  36          
  37          
  38          void drawBmp(void)
  39          {
  40   1          unsigned char i, y;
  41   1          const unsigned char *p = bmpData;
  42   1      
  43   1          LCD_startGraphic();
  44   1          
  45   1          for (y = 0; y < 64; y++)
  46   1          {
  47   2              LCD_set_graphic_address(0, y);
  48   2              for (i = 0; i < 6; i++)
  49   2              {
  50   3                  LCD_write_data(pgm_read_byte(p));
C51 COMPILER V9.60.0.0   TEST7920                                                          12/22/2021 10:31:52 PAGE 2   

  51   3                  p++;
  52   3              }
  53   2          }
  54   1          
  55   1          LCD_endGraphic();
  56   1      }
  57          
  58          int main(void)
  59          {
  60   1          unsigned char row, prevRow;
  61   1      
  62   1      #if LCD_INTERFACE != MODE_SERIAL
                  unsigned char x, y;
              #endif
  65   1      
  66   1          DDRD = 0xff;
  67   1          PORTD = 0x00;
  68   1          DDRB = 0xff;
  69   1          PORTB = 0x00;
  70   1          DDRC = 0xff;
  71   1          PORTC = 0x00;
  72   1      
  73   1          LCD_init();
  74   1          LCD_clear();
  75   1          LCD_write_string(0x0102, "CDHIGH设计");
  76   1          //画框，演示读ST7920，只有并行模式能读ST7920
  77   1          #if LCD_INTERFACE != MODE_SERIAL
                      for (x = 31 - 3; x <= 112 + 3; x++)
                      {
                          LCD_write_dot(x, 16 - 3);
                          LCD_write_dot(x, 31 + 3);
                          //_delay_us(100);
                      }
                      for (y = 16 - 3; y <= 31 + 3; y++)
                      {
                          LCD_write_dot(31 - 3, y);
                          LCD_write_dot(112 + 3, y);
                          //_delay_us(100);
                      }
                  #endif
  91   1          _delay_ms(200);
  92   1          LCD_clear();
  93   1      
  94   1          prevRow = 0xff;
  95   1          while (1)
  96   1          {
  97   2              LCD_write_string(0x0003, "生命诚可贵");
  98   2              _delay_ms(200);
  99   2              LCD_write_string(0x0103, "爱情价更高");
 100   2              _delay_ms(200);
 101   2              LCD_write_string(0x0203, "若为自由故");
 102   2              _delay_ms(200);
 103   2              LCD_write_string(0x0303, "两者皆可抛");
 104   2              _delay_ms(200);
 105   2              drawBmp();
 106   2              _delay_ms(200);
 107   2              for (row = 0; row < 4; row++)
 108   2              {
 109   3                  if (prevRow != 0xff)
 110   3                  {
 111   4                      LCD_Inverse_16X16(ROW_COL(prevRow, 3), 5, 0);
 112   4                  }
C51 COMPILER V9.60.0.0   TEST7920                                                          12/22/2021 10:31:52 PAGE 3   

 113   3                  LCD_Inverse_16X16(ROW_COL(row, 3), 5, 1);
 114   3                  prevRow = row;
 115   3                  _delay_ms(200);
 116   3              }
 117   2              prevRow = 0xff;
 118   2              LCD_clear();
 119   2              _delay_ms(200);
 120   2          }
 121   1      
 122   1          return 1;
 123   1      }

C51 COMPILATION COMPLETE.  0 WARNING(S),  4 ERROR(S)
