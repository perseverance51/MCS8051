C51 COMPILER V9.60.0.0   HC595                                                             01/21/2022 19:12:52 PAGE 1   


C51 COMPILER V9.60.0.0, COMPILATION OF MODULE HC595
OBJECT MODULE PLACED IN .\Objects\hc595.obj
COMPILER INVOKED BY: C:\Keil_v5\C51\BIN\C51.EXE hc595.c OPTIMIZE(8,SPEED) BROWSE DEBUG OBJECTEXTEND PRINT(.\Listings\hc5
                    -95.lst) TABS(2) OBJECT(.\Objects\hc595.obj)

line level    source

   1          /*********************************************************************************
   2          ╫соъ╥╫й╫гК©╢main.hк╣цВ
   3                  ╤Чф╛74HC595 + р╩╦Ж8*8╣ЦуС(1088AS╧╡рУ)
   4                  й╣ожндвж╬╡л╛отй╬+рф╤╞отй╬(вСрф/сррф/иорф/обрф)
   5                  ╢ЗбК╬╚╪Р,╥╫╠ЦюМ╫Б
   6          **********************************************************************************/
   7          //#include "main.h"
   8          #include <STC89C5xRC.H>
   9          #include <intrins.h>
  10          typedef unsigned char uchar;
  11          typedef unsigned char uint;
  12          //╤╗рЕ╠Да©
  13          uchar temp = 0xfe;
  14          sbit LEDARRAY_DI = P1^0;  //╣з╤Чф╛74HC595╣дрЩ╫е14
  15          sbit LEDARRAY_LAT = P1^1; //╣з╤Чф╛74HC595╣дрЩ╫е12
  16          sbit LEDARRAY_CLK = P1^2; //╣з╤Чф╛74HC595╣дрЩ╫е11 
  17          
  18          /*х║дёк╣цВ:
  19          ╡к╣╔я║оН:
  20          "╣ЦуС╦Яй╫" : ╦Ы╬щдЦ╣д╣ЦуСйг╧╡рУ╩╧йг╧╡яТ, нр╣дйг╧╡рУ, кЫртя║тЯ╣дйгрУбК
  21          "х║дёвъоР" : ╦Ы╬щдЦ╣дпХгС, я║тЯдФоР╩РкЁоР, нруБюОя║тЯ╣дйгдФоР
  22          "х║дё╥╫й╫" : гК©╢обцФй╬юЩк╣цВ, ╦Ы╬щрф╤╞╥╫оРя║тЯ
  23          "ц©ппотй╬йЩ╬щ" : ╣ЦуС=8, кВрЩ=8
  24          "р╨╬╖цФ╟Е╥буФ" : оЯкь╢Сп║=8
  25          "йДЁЖйЩжф" : я║тЯ"й╝аЫ╫ЬжфйЩ"
  26          "йДЁЖя║оН" : я║тЯ"йДЁЖ╬╚╪Р╦Яй╫"╨м"йДЁЖ╫Т╢у╦Яй╫"
  27          "вт╤╗рЕ╦Яй╫" : я║тЯ"C51╦Яй╫", фДкЭд╛хо
  28          
  29          жВ╫ГцФя║оН:
  30          вжлЕ: свт╡
  31          вж©М: 8                вж╦ъ: 8
  32          ╣ЦуС©М: 8        ╣ЦуС╦ъ: 8
  33          */
  34          
  35          //╤╞л╛отй╬йЩвИ
  36          uchar Display_word1[48] = {                        //йЩвИ╦ЖйЩ(уБюО╣д40╢З╠Мсп40╦Жй╝аЫ╫Ьжф,рРн╙йг8*8╣ЦуС,кЫр
             -тц©╦Жвжсп8╦Жй╝аЫ╫Ьжф)
  37          0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,        //©у╟в(г╟цФ╥ер╩╦Ж©у╟вфа,й╣ожрф╤╞ЁЖвжп╖╧Ш)
  38          //0x10,0x38,0x54,0x10,0x10,0x10,0x10,0x10,        //╪Щм╥
  39          
  40          //дФоР+жПапй╫╩Рапппй╫ (вСрф/сррф)
  41          0x00,0x08,0x08,0x08,0x08,0x08,0x08,0x08,        //"р╩",0
  42          0x80,0x80,0x80,0xFE,0x90,0x90,0x80,0x80,        //"ио",1
  43          0x00,0x40,0x44,0x44,0x44,0x44,0x40,0x00,        //"╤Ч",2
  44          0x00,0x02,0x02,0xFE,0x0A,0x12,0x02,0x00,        //"об",3
  45          
  46          
  47          //дФоР+ппапй╫╩РжПппй╫ (иорф/обрф)
  48          /*0x00,0x00,0x00,0xFE,0x00,0x00,0x00,0x00,        //"р╩",0
  49          0x00,0x08,0x08,0x08,0x38,0x08,0x08,0xFF,        //"ио",1
  50          0x00,0x00,0x3C,0x00,0x00,0x00,0x7E,0x00,        //"╤Ч",2
  51          0x00,0x7E,0x08,0x18,0x28,0x08,0x08,0x08,        //"об",3
  52          */
  53          
C51 COMPILER V9.60.0.0   HC595                                                             01/21/2022 19:12:52 PAGE 2   

  54          0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,        //©у╟в(вН╨С╥ер╩╦Ж©у╟вфа,ртцБЁЖожбрбК)
  55          };
  56          
  57          //╬╡л╛отй╬йЩвИ(╣з1╦Ж╡нйЩн╙╪╦╦Жвж,╣з2╦Ж╡нйЩн╙ц©вж╤Юиывж╫з)
  58          uchar Display_word2[3][8] = {
  59          0x0C,0x1E,0x3E,0x7C,0x7C,0x3E,0x1E,0x0C,        //пд
  60          0x10,0x38,0x54,0x10,0x10,0x10,0x10,0x10,        //╪Щм╥
  61          0x0C,0x1E,0x3E,0x7C,0x7C,0x3E,0x1E,0x0C,        //пд
  62          };
  63          void Delay_ms(uint n);
  64          void Send_Data(uchar dat);
  65          void Send_Byte(uchar dat);
  66          //****************************************************
  67          //жВ╨╞йЩ
  68          //****************************************************
  69          void main()
  70          {
  71   1              uint i;
  72   1              uchar j,k;
  73   1      //  P14 = 0x00;
  74   1              while(1)
  75   1              {               
  76   2                      ///////////////////////////////////////////////////////////////////////////
  77   2                      //╬╡л╛отй╬
  78   2      //                for(j = 0 ; j < 3 ; j++) {                //╧╡пХотй╬3╦Жвж
  79   2      //                        for(i = 0 ; i < 1000 ; i++)        {       //╬╡л╛отй╬й╠╪Д
  80   2      //                                temp = 0x7f;
  81   2      //                                for(k = 0 ; k < 8 ; k++) {   //отй╬1-8ап(8н╙отй╬8ап)хГ╧Ш╦дЁи4тРсп4апотй╬
             -,аМ4ап╨зфа             //отй╬1-8ап(8н╙отй╬8ап)хГ╧Ш╦дЁи4тРсп4апотй╬,аМ4ап╨зфа
  82   2      //                                        Send_Data(Display_word2[j][k]);
  83   2      //                                }
  84   2      //                        }
  85   2      //                }
  86   2      
  87   2                      ///////////////////////////////////////////////////////////////////////////               
  88   2                      //рф╤╞╥╫й╫(оКр╙╡╩м╛╣дрф╤╞╥╫й╫,╬м╟╢ртобк╣цВпч╦д)
  89   2      
  90   2                      for(j = 0 ; j < 40 ; j++) //вСрф(жПапй╫)/иорф(жПппй╫)
  91   2                      //for(j = 39 ; j-1 > 0 ; j--)        //сррф(жПапй╫)/обрф(жПппй╫)
  92   2      
  93   2                      for(j = 0 ; j < 40 ; j++) {     //╧╡пХотй╬3╦Жвж                           //р╙отй╬╣двжйЩ(ц
             -©╦Жвж8н╩,уБюОйготй╬р╩фа©у╟в+4╦Жвж,кЫртйг8+4*8=40)
  94   3                              for(i = 0 ; i < 50 ; i++) {  //╬╡л╛отй╬й╠╪Д                      //©ьжфрф╤╞╣дкы╤хё
             -╗йЩвжт╫п║рф╤╞кы╤хт╫©Лё╛т╫╢Ст╫бЩё╘
  95   4                                      temp = 0x7f;
  96   4      
  97   4                                      //рф╤╞╥╫й╫(оКр╙╡╩м╛╣дрф╤╞╥╫й╫,╬м╟╢ртобк╣цВпч╦д)
  98   4                                      for(k = 0 ; k < 8 ; k++) //вСрф(жПапй╫)/сррф(жПапй╫)
  99   4                                      //for(k = 8 ; k-1 > 0 ; k--) //иорф(жПппй╫)/обрф(жПппй╫)
 100   4      
 101   4                                      for(k = 0 ; k < 8 ; k++) {   //отй╬1-8ап(8н╙отй╬8ап)хГ╧Ш╦дЁи4тРсп4апотй╬,а
             -М4ап╨зфа             //(ц©╦Жвжх║8╢нйЩвИ, ╡╩р╙пч╦д)
 102   5                                              Send_Data(Display_word1[j+k]);
 103   5                                      }
 104   4                              }
 105   3                      }
 106   2              }                                       
 107   1      }
 108          //****************************************************
 109          //╥╒кмйЩ╬щ(╡╩пХр╙пч╦д)
 110          //****************************************************
 111          void Send_Data(uchar dat)
C51 COMPILER V9.60.0.0   HC595                                                             01/21/2022 19:12:52 PAGE 3   

 112          {
 113   1        Send_Byte(temp);  //апя║тЯ
 114   1        Send_Byte(dat);   //йЩ╬щ
 115   1        LEDARRAY_LAT = 1; //кЬ╢ФйЩ╬щ
 116   1        _nop_();
 117   1        LEDARRAY_LAT = 0;
 118   1        _nop_();
 119   1        temp = (temp>>1)|0x80;
 120   1      }
 121          //****************************************************
 122          //╥╒кмр╩╦Жвж╫зйЩ╬щ(╡╩пХр╙пч╦д)
 123          //****************************************************
 124          void Send_Byte(uchar dat)
 125          {
 126   1        uchar i;
 127   1        LEDARRAY_CLK = 0;
 128   1        _nop_();  
 129   1        LEDARRAY_LAT = 0;
 130   1        _nop_();
 131   1      
 132   1        for( i = 0 ; i < 8 ; i++ )
 133   1        {
 134   2          if( dat&0x01 ) {
 135   3            LEDARRAY_DI = 1;  
 136   3          } else {
 137   3            LEDARRAY_DI = 0;
 138   3          }   
 139   2          LEDARRAY_CLK = 1;       //иоиЩяь╥╒кмйЩ╬щ
 140   2          LEDARRAY_CLK = 0;
 141   2          dat >>= 1;      
 142   2        }   
 143   1      }


MODULE INFORMATION:   STATIC OVERLAYABLE
   CODE SIZE        =    172    ----
   CONSTANT SIZE    =   ----    ----
   XDATA SIZE       =   ----    ----
   PDATA SIZE       =   ----    ----
   DATA SIZE        =     73       4
   IDATA SIZE       =   ----    ----
   BIT SIZE         =   ----    ----
END OF MODULE INFORMATION.


C51 COMPILATION COMPLETE.  0 WARNING(S),  0 ERROR(S)
