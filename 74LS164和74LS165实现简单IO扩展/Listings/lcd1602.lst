C51 COMPILER V9.60.0.0   LCD1602                                                           04/05/2022 10:22:28 PAGE 1   


C51 COMPILER V9.60.0.0, COMPILATION OF MODULE LCD1602
OBJECT MODULE PLACED IN .\Objects\lcd1602.obj
COMPILER INVOKED BY: C:\Keil_v5\C51\BIN\C51.EXE lcd1602.c OPTIMIZE(8,SPEED) BROWSE DEBUG OBJECTEXTEND PRINT(.\Listings\l
                    -cd1602.lst) TABS(2) OBJECT(.\Objects\lcd1602.obj)

line level    source

   1          /**
   2            ***************************************************************************************
   3            * 文  件：LCD1602模块实现源文件
   4            ***************************************************************************************
   5            */
   6           
   7          #include "reg52.h"  //52系列单片机头文件
   8          #include "delay.h"  //延时函数实现头文件
   9          #include "lcd1602.h"  //LCD1602实现头文件
  10           
  11          /**
  12            ***************************************************************************************
  13            * 函  数：LCD1602判断忙函数，忙则循环等待
  14            * 参  数：无
  15            * 返回值：无
  16            ***************************************************************************************
  17            */
  18          void LCD1602_isBusy(void)  //LCD1602判断忙函数
  19          {
  20   1        unsigned char busy;  //忙标志
  21   1        LCD1602_RS = 0;  //RS = 0
  22   1        LCD1602_RW = 1;  //RW = 1
  23   1        LCD1602_E = 0;  //E = 0
  24   1        do{
  25   2          LCD1602_E = 1;  //E = 1
  26   2          delay_ms(5);  //延时5毫秒
  27   2          busy = LCD1602_DATA & 0x80;  //读忙标志
  28   2          LCD1602_E = 0;  //E = 0
  29   2        }while(busy);  //忙则循环等待
  30   1      }
  31           
  32          /**
  33            ***************************************************************************************
  34            * 函  数：LCD1602写指令、写显示地址函数
  35            * 参  数：cmd：要写入的指令或显示地址
  36            * 返回值：无
  37            ***************************************************************************************
  38            */
  39          void LCD1602_WriteCmd(unsigned char cmd)  //LCD1602写指令、写显示地址函数
  40          {
  41   1        LCD1602_isBusy();  //判断忙，忙则循环等待
  42   1        LCD1602_RS = 0;  //RS = 0
  43   1        LCD1602_RW = 0;  //RW = 0
  44   1        LCD1602_E = 0;  //E = 0
  45   1        LCD1602_DATA = cmd;  //写入指令或显示地址
  46   1        LCD1602_E = 1;  //E = 1
  47   1        delay_ms(5);  //延时5毫秒
  48   1        LCD1602_E = 0;  //E = 0
  49   1      }
  50           
  51          /**
  52            ***************************************************************************************
  53            * 函  数：LCD1602写数据函数
  54            * 参  数：num：要写入的8位数据
C51 COMPILER V9.60.0.0   LCD1602                                                           04/05/2022 10:22:28 PAGE 2   

  55            * 返回值：无
  56            ***************************************************************************************
  57            */
  58          void LCD1602_WriteData(unsigned char num)  //LCD1602写数据函数
  59          {
  60   1        LCD1602_isBusy();  //判断忙，忙则循环等待
  61   1        LCD1602_RS = 1;  //RS = 1
  62   1        LCD1602_RW = 0;  //RW = 0
  63   1        LCD1602_E = 0;  //E = 0
  64   1        LCD1602_DATA = num;  //写入数据
  65   1        LCD1602_E = 1;  //E = 1
  66   1        delay_ms(5);  //延时5毫秒
  67   1        LCD1602_E = 0;  //E = 0
  68   1      }
  69           
  70          /**
  71            ***************************************************************************************
  72            * 函  数：LCD1602指定行列位置显示字符函数
  73            * 参  数：x：行，1~2
  74            * 参  数：y：列，1~16
  75            * 参  数：chr：显示的字符，ASCII字符
  76            * 返回值：无
  77            ***************************************************************************************
  78            */
  79          void LCD1602_DispChar (unsigned char x,unsigned char y,unsigned char chr)  //LCD1602指定行x列y位置显示字符
             -chr函数
  80          {
  81   1        LCD1602_WriteCmd(0x80+0x40*(x-1)+(y-1));  //显示字符位置：第x行第y列
  82   1        LCD1602_WriteData(chr);  //显示指定字符chr
  83   1      }
  84           
  85          /**
  86            ***************************************************************************************
  87            * 函  数：LCD1602初始化函数
  88            * 参  数：无
  89            * 返回值：无
  90            ***************************************************************************************
  91            */
  92          void LCD1602_Init(void)  //LCD1602初始化函数
  93          {
  94   1        LCD1602_WriteCmd(0x38);  //显示模式：8位数据接口，两行显示，5*7点阵字符
  95   1        LCD1602_WriteCmd(0x08);  //显示关，光标关，闪烁关
  96   1        LCD1602_WriteCmd(0x01);  //清除DDRAM，清除AC（清屏）
  97   1        LCD1602_WriteCmd(0x06);  //读数据后AC自动加1，读数据后画面不动
  98   1        LCD1602_WriteCmd(0x0c);  //显示开，光标关，闪烁关
  99   1      }


MODULE INFORMATION:   STATIC OVERLAYABLE
   CODE SIZE        =    136    ----
   CONSTANT SIZE    =   ----    ----
   XDATA SIZE       =   ----    ----
   PDATA SIZE       =   ----    ----
   DATA SIZE        =   ----       3
   IDATA SIZE       =   ----    ----
   BIT SIZE         =   ----    ----
END OF MODULE INFORMATION.


C51 COMPILATION COMPLETE.  0 WARNING(S),  0 ERROR(S)
